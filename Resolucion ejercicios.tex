\documentclass[11pt]{article}

\usepackage[spanish,activeacute]{babel}
\usepackage{titlesec}
\usepackage{graphicx}
\usepackage{float}
\usepackage[bottom]{footmisc}
\usepackage[hidelinks]{hyperref}
\usepackage{subcaption}
\usepackage[most]{tcolorbox}
\usepackage{xcolor}
\usepackage{enumitem}
\usepackage{titlesec}


\setcounter{secnumdepth}{4}

\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\setlength{\parindent}{1.0em}
\setlength{\parskip}{1.0em}
\setlength{\emergencystretch}{5.0em}
\setlength{\belowcaptionskip}{-10pt}
\counterwithin{figure}{section}
\titlespacing*{\section}{0em}{3.5em}{1.5em}
\setcounter{tocdepth}{2}
\hypersetup{
	linktoc=all
}
\setlist[itemize]{topsep=0cm}


\title{\Huge Backups}
\author{Eugenia Damonte, Ariel Fideleff y Mart\'in Go\~ni}
\date{}


\definecolor{light-orange}{RGB}{168,87,0}
\definecolor{light-blue}{RGB}{64, 76, 201}
\definecolor{dark-gray}{RGB}{100,100,100}
\definecolor{light-red}{RGB}{201, 60, 60}
\definecolor{fuchsia}{RGB}{168,0,168}


\newtcolorbox{code-box}{colback=white!75!gray,colframe=white!15!gray,fontupper=\linespread{1.15}\selectfont}


\newcommand{\imagecaption}[1]{\vspace{-7pt}\caption*{\char91\ref{fig:#1}\char93}}
\newcommand{\codetext}[2]{\large\texttt{\textcolor{#1}{#2}}}
\newcommand{\rsync}[0]{\textbf{rsync}}
\newcommand{\backup}[0]{\texttt{Backup}}
\newcommand{\customitem}[1]{\item \textbf{#1:}}


\begin{document}
	\pagenumbering{gobble}
	\maketitle
	\newpage
	\tableofcontents
	\newpage
	\pagenumbering{arabic}

	
	\section{Backups}
	\subsection{Que es un backup}
		En el mundo del IT un backup es una copia de parte o toda la informaci'on de una computadora, almacenada en una unidad de almacenamiento distinta a la de la computadora. Esta puede luego ser usada para recuperar la informac'on original en caso de que ocurra una p'erdida de datos. Es importante recalcar que una p'erdida de datos puede ocurrir no solo debido a daño al sistema, ya sea de hardware o software, sino que tambi'en puede ser provocada por un error humano(por ejemplo borrar un archivo importante). Para cumplir su funci'on un backup debe contener por lo menos una copia de toda la informaci'on que se considere vale la pena guardar. Esto nos introduce a un dilema muy importante, ¿que informaci'on vale la pena guardar?

		En principio uno podría pensar que simplemente deber'iamos hacer un backup de todo el sistema, para no tener que tomar esta decisi'on. Sin embargo a medida que crece el tama'no y complejidad del sistema se vuelve cada vez mas costoso, en todo sentido, realizar backups completos. Algo que tambi'en se debe tomar en cuenta al hacer esta decisi'on es el valor del sistema en s'i, es decir cuanto vale el sistema operativo, sus configuraciones y ajustes. Si bien a simple vista esto puede parecer algo no muy importante en sistemas grandes y complejos, que requieren una gran cantidad de conocimiento y experiencia para configurar la configuraci'on puede ser igual de valiosa que la informaci'on que almacena el sistema.

	 \subsection{Tipos de backups}
		Antes de poder elegir que tipo de backup hacer hay que elegir que m'etodo utilizar para el mismo, los dos que se usan hoy en d'ia son:
		\begin{itemize}
			\customitem{Backup por archivos} El backup por archivos es la forma original en que se hac'ian los backups. En este todos los archivos y carpetas a los que se les debe realizar un backup son copiados utilizando las utilidades proveídas por el sistema operativo. Este m'etodo si bien es simple tambi'en es lento y consume una gran cantidad de recursos.\footnote{Esto se debe a que para copiar un archivo utilizando el sistema operativo se debe: Encontrar los bloques en el disco duro donde se encuentra la carpeta que contiene al archivo, leer la carpeta, buscar el archivo especificado, determinar en que bloques se encuentra y finalmente copiarlo.}
			\customitem{Backup por im'agenes} Otra opci'on que esta ganando popularidad es el backup por im'agenes, este m'etodo sobrepasa gran parte de las utilitades del sistema operativo, copiando bloques del disco duro de manera directa. Esto le permite ser mucho m'as eficiente a la hora de copiar archivos que han sido modificados, esto es porque no es necesario copiar todo el archivo, solo los bloques que han sido modificados. 
		\end{itemize}

		Cabe destacar que estos m'etodos no son mutuamente exclusivos, se pueden usar en conjunto para obtener mayor eficiencia y robustez. Por ejemplo se puede tener un sistema que haga un backup por im'agen diariamente y uno por archivos semanalmente.

		Una vez que se decidi'o que metodo utilizar para hacer los backups ahora hay que decidir que m'etodo usar para los mismos. Los backups se dividen en tres tipos:
		\begin{itemize}
			\customitem{Backup completo} Es el mas simple y el m'etodo original que se usaba para hacer los backups. Copia toda la informaci'on en el sistema especificado. Lo bueno de este m'etodo es que el backup es autocontenido, esto significa que no se requiere de ning'un otro tipo de informaci'on o archivo para que este funcione. Por el otro lado, se necesitan grandes cantidades de espacio y pueden ser casi id'enticos a backups completos anteriores.
			\customitem{Backup diferencial} Este tipo de backup solo copia las diferencias entre el sistema actual y el del 'ultimo backup completo. La principal ventaja de este m'etodo es que es mucho mas r'apido y ocupa mucho menos espacio que un backup completo. La desventaja es que para poder recupera la informaci'n con un sistema de backup diferencial se necesita el 'ultim backup completo junto con el backup diferencial.
			\customitem{Backup incremental}El backup incremental solo copia diferencias entre el el sistema actual y el 'ultimo backup completo, diferencial o incremental. La ventaja es que es a'un mas r'apido y ocupa menos espacio que un backup diferencial. El gran inconveniente con esta forma de backup es que para recuperar la informaci'on se necesitan todos los backups incrementales anteriores junto con el 'ultimo backup completo. Debido a esto recuperar informaci'on con este tipo de sistema puede ser un proceso largo.
		\end{itemize}


	\section{rsync}
	\subsection{Que es rsync}
		%The empty statement after "\rsync" is because LaTeX ignores spaces after macros, an empty statement is used to break it. Refer to: https://tex.stackexchange.com/questions/31091/space-after-latex-commands
		\rsync{} es una utilidad que permite transferir y sincronizar archivos, entre otras cosas, entre una computadora y un disco duro. Tambi'en es capaz de realizar esta tareas usando dispositivos de red. Su uso es muy com'un en sistemas basados en Unix, dada su simplicidad y facilidad de uso.

		El programa inicial fue escrito por Andrew Tridgell y Paul Mackerras, en C. Su primera versi'on se anunci'o en Junio de 1996, luego en 1999 Tridgell habl'o sobre el diseño y la implementaci'on de \rsync{} en su tesis. Es similar a la utilidad \texttt{rdist -c} creada por Ralph Campbell en 1983. Actualmente Wayne Davison se encarga de mantener el proyecto

	\subsection{Instalaci'on de rsync}
		Antes de poder usar \rsync{} tuvimos que instalarlo. Si bien hoy en d'ia suele venir incluido con la gran mayor'ia de las distros, debido a que Debian 7 es bastante viejo no la incluye. Para instalarlo usamos el comando \texttt{sudo apt-get install rsync}.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.7]{Images/rsync/rsync_install.PNG}
    			\caption{Instalamos \rsync{} con \texttt{sudo apt-get install rsync}.}
    			\label{fig:rsync_install}
		\end{figure}

	\subsection{Uso b'asico de rsync}
	\subsubsection{Preparando el disco}
		Lo primero que necesitamos para hacer un backup de cualquier tipo es una unidad de almacenamiento para guardar el backup. En nuestro caso simplemente creamos otro disco duro y lo ``conectamos'' a la VM. Para hacer esto con la m'aquina apagada abrimos la configuraci'on y fuimos a \texttt{Storage}. All'i apretamos el bot'on para a'nadir un disco duro, esto nos llevo a un men'u  dond elegimos crear un nuevo disco. Especificamos el tipo y tama'no del disco y presionamos \texttt{Create}. Finalmente montamos el disco, para esto volvimos a apretar el bot'on para a'nadir una disco duro y seleccionamos el creado.

		Es importante destacar que no se debe usar un pen drive para realizar backups. Esto es porque los transistores que almacenan informaci'on en los mismos no est'an hechos para soportar el n'umero de escrituras que se necesitan para una unidad de backup. Esto a largo plazo causa que algunos de los transistores en ellos se queden ``trabados''\footnote{Realmene no se quedan ``trabados'' sino que el transistor, normalmente un FGT, pierde su capacidad de cargarse y descargarse, y por tanto de cambiar de estado.} en una posici'on haciendo imposible contiunar us'andolo. Con el tiempo esto causa deteriorio en la capacidad y velocidad de funcionamiento de la unidad y puede incluso causar perdida de datos.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.65]{Images/rsync/rsync_hdd_config.PNG}
    			\caption{Creamos un nuevo disco y lo montamos en la VM}
    			\label{fig:rsync_hdd_config}
		\end{figure}

		Ahora que nuestra VM pod'ia ver el disco hab'ia que montarlo y configurarlo. Primero utlizamos el comando \texttt{sudo fdsik -l} para verificar que el disco fuese detectado por el sistema. Al usar el comando este nos mostr'o que había un disco llamado \texttt{/dev/sdb} de 10GB, ese era el disco que hab'iamos montado.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.55]{Images/rsync/rsync_disk_info.PNG}
    			\caption{Usamos el comando \texttt{sudo fdsik -l} para verificar que el disco fuese detectado por el sistema.}
    			\label{fig:rsync_disk_info}
		\end{figure}

		Sabiendo el nombre del disco procedimos a particionarlo y formatearlo. Para esto usamos el comando \texttt{sudo cfdisk /dev/sdb}, este abri'o \texttt{cfdisk} una utilidad que permite crear particiones de discos. Primero nos aseguramos de que este fuese el disco que hab'iamos montado y no solo uno con esa capacidad mirando el tipo de sistema de archivos, este decia \texttt{Free Space}, es decir que no estaba formateado, era nuestro disco. Entonces seleccionamos la opci'on \texttt{New} para crear una nueva partici'on, dejamos el tama'no especificado por \texttt{cfdisk}, que es el m'aximo que permite la unidad. Esto nos devolvi'o al men'u principal, para confirmar los cambios usamos la opci'on \texttt{Write} para escribir los cambios a la tabla de discos del sistema. 

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.40]{Images/rsync/rsync_disk_partition.PNG}
    			\caption{Usamos \texttt{cfdisk} para crear una partici'on en el disco nuevo.}
    			\label{fig:rsync_disk_partition}
		\end{figure}

		Finalmente confirmamos que la operaci'on se hab'ia realizado de manera exitosa usando la opci'on \texttt{Print}. Esta nos mostr'o que efectivamente hab'ia una partici'on en el disco.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.65]{Images/rsync/rsync_disk_table.PNG}
    			\caption{Una vez creada la partici'on la verificamos con la opci'on \texttt{Print}.}
    			\label{fig:rsync_disk_table}
		\end{figure}

		Ahora que ya ten'iamos una particion que pod'iamos usar llego el momento de formatearla para eso usamos el comando \texttt{sudo mkfs.ext4 /dev/deb}. Lo que hizo fue formatear el disco con el formato \texttt{ext4},\footnote{\texttt{ext4}(fourth extended filesystem) es un sistema de archivos transacional que reemplazo a ext3.} para poder as'i montarlo.
		
 		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.65]{Images/rsync/rsync_disk_format.PNG}
    			\caption{Formateamos el disco con el comando \texttt{sudo mkfs.ext4 /dev/deb}.}
    			\label{fig:rsync_disk_format}
		\end{figure}

		Como 'ultimo paso montamos el disco para poder usarlo. Para esto primero creamos una carpeta en la cual montar el disco, normalmente estas se encuentran en el directorio \texttt{/mnt}. Entonces creamos la carpeta \texttt{/mnt/sdb} con el comando \texttt{sudo mkdir /mnt/sdb}.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.75]{Images/rsync/rsync_disk_mount.PNG}
    			\caption{Creamos el directorio donde montar el disco con \texttt{sudo mkdir /mnt/sdb}.}
    			\label{fig:rsync_disk_mount}
		\end{figure}

		Finalmente montamos el disco para poder usarlo con \texttt{sudo mount /dev/sdb /mnt/sdb}. El problema con solo hacer esto es que tendr'iamos que volver a montar el disco cada vez que iniciacemos el sistema. Para solucionar esto cambiamos el archivo \texttt{/etc/fstab}, que almacena los discos que deben ser montados al iniciar el sistema. Abr'imos el archivo para editarlo con el comando \texttt{sudo vi /etc/fstab}, luego a'nadimos lo siguiente al final del mismo:

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{dark-gray}{/dev/sdb /mnt/sdb ext4 defaults 0 0}
			\end{code-box}
		\end{figure}
		
		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.65]{Images/rsync/rsync_disk_automount.PNG}
    			\caption{Editamos \texttt{sudo vi /etc/fstab} para que el disco se monte automaticamente al iniciar la m'aquina.}
    			\label{fig:rsync_disk_automount}
		\end{figure}

		El primer elemento es el camino del disco, el segundo a donde debe ser montado y el tercero el sistema de archvios. Los dem'as los dejamos con sus valores por defecto. Hab'iendo hecho esto el disco deber'ia montarse automaticamente cada vez que iniciemos la m'aquina. Como una verificaci'on usamos el comando \texttt{mount \textbar\/ grep ``sdb''}, lo que hace es listar todos los discos montados y buscar uno llamado \texttt{``sdb''}.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.65]{Images/rsync/rsync_disk_check.PNG}
    			\caption{Verificamos que el disco este estuviese montado correctamente con \texttt{mount \textbar\/ grep ``sdb''}.}
    			\label{fig:rsync_disk_check}
		\end{figure}

		Al ejecutar el comando vimos que efectivamente hab'ia un disco montado llamado \texttt{``sdb''}, confirmando que el disco estaba montado correctamente. Ahora que el disco estaba montado y funcionando decidimos probar almacenar algo en el, solo para probar. Nos movimos a el mismo con \texttt{cd /mnt/sdb} y luego usamos el comando \texttt{touch Prueba} para intentar crear un archivo. Al ejecutar el comando el sistema nos dijo que no ten'iamos los permisos para crear un archivo. Cuando listamos los permisos del disco con \texttt{ls -l ..}, se volvio claro porque. El due'no del disco era el usuario \texttt{root}, no nuestro usuario.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.75]{Images/rsync/rsync_disk_touch.PNG}
    			\caption{Intentamos crear un archivo con \texttt{touch Prueba}.}
    			\label{fig:rsync_disk_touch}
		\end{figure}

		Para solucionar esto nos movimos a la carpeta \texttt{/mnt}(donde \texttt{sdb} se encuentra) y usamos el comando \texttt{sudo chown -R martin:martin sdb} para cambiar el due'no de la carpeta de \texttt{root} a \texttt{martin}. Habiendo hecho esto repetimos la prueba con \texttt{touch} y esta fue exitosa.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.75]{Images/rsync/rsync_disk_works.PNG}
    			\caption{Cambiamos el due'no de \texttt{sdb} para solucionar el problema y lo verificamos.}
    			\label{fig:rsync_disk_works}
		\end{figure}

		Finalmente con el disco funcionando correctamente decidimos comenzar con la pr'oxima parte del trabajo, hacer backups con \rsync{} usando el nuevo disco.

	\subsubsection{Usando rsync}
		Habiendo llegado la hora de usar \rsync{} decidimos hacer un backup completo de una carpeta en nuestro directorio propio como prueba de uso. Seleccionamos la carpeta \texttt{C}, que ten'ia todo el c'odigo correspondiente a el trabajo practico sobre software en formato fuente. La elegimos porque era una carpeta que a su vez ten'ia varias sub carpetas con archivos en ellas, lo que nos permit'ia probar las opciones recursivas de \rsync{}. Antes de hacer el backup creamos la carpeta a donde los guardar'iamos, \texttt{/mnt/sdb/Backups}, lo hicimos con el comando \texttt{mkdir /mnt/sdb/Backups}.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.80]{Images/rsync/rsync_backup_C_contents.PNG}
    			\caption{Los contenidos del directorio \texttt{C}.}
    			\label{fig:rsync_C_contents}
		\end{figure}

		El uso b'asico de \rsync{} es bastante simple, primero se pone el directorio desde el que se quiere copiar y luego hacia cual se quiere copiar. Para empezar esto fue lo que hicimos, usamos el comando \texttt{rsync \textasciitilde/C /mnt/sdb/Backup}, al hacerlo el mensaje \textit{skipping directory C} apareci'o. Cuando revisamos los contenidos de \backup{} vimos que estaba vac'io. Esta situaci'on se explica si miramos los contenidos del directorio \texttt{C}, dentro de el solo hay carpetas, no archivos. Entonces al no encontrar archivos que copiar dentro de la carpeta especificada \rsync{} simplemente la omiti'o y no copi'o nada. Dado este problema a'nadimos la opci'on \texttt{-r} a el comando,  para copiar tamb'ien los contenidos de todas las subcarpetas. Al ejecutar el comando y luego verificar los contenidos de \backup{} vimos que ahora hab'ia una carpeta llamada \texttt{C} en ella, indicando que los archivos efectivamente se hab'ian copiado.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.80]{Images/rsync/rsync_backup_first_try.PNG}
    			\caption{Nuestro primer intento de usar \rsync{}.}
    			\label{fig:rsync_backup_first_try}
		\end{figure}

		Para asegurarnos de que la copia hubiese efectivamente ocurrido listamos los contenidos de \backup{} con \texttt{ls -Rl /mnt/sdb/Backup}, esto nos revel'o algo interesante, todos los archivos ten'ian la fecha de modificaci'on de cuando hab'iamos realizado el backup. Esto ten'ia sentido ya que esos archivos se crearon y modificaron al momento en que nosotros realizamos el backup. Sin embargo nos preguntamos si hab'ia alguna manera de conservar la fecha original. Entonces decidimos leer las opciones de \rsync{}, para ver si se pod'ia, junto con tal vez encontrar otras opciones 'utiles.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.80]{Images/rsync/rsync_backup_contents.PNG}
    			\caption{Los contenidos de \backup{}, mostrados con {ls -Rl /mnt/sdb/Backup}.}
    			\label{fig:rsync_backup_contents}
		\end{figure}

		Luego de leer la p'agina de \texttt{man} de \rsync{} encontramos no solo opciones 'utiles sino tambi'en informaci'on sobre como mejor usar el comando y adaptarlo mejor a nuestras necesidades.

		Lo primero que encontramos fue una secci'on referida a el uso de la barra(\texttt{/}). Si se pone al final del directorio desde el que se quiere copiar cambia la forma en la que \rsync{} almacena los archivos copiados. Lo que hace es evitar crear un directorio adicional, copiando directamente los contenidos del directorio especificado sin el directorio en s'i. La diferencia se puede observar mejor en la figura \ref{fig:rsync_backup_forwardslash}.

		\begin{figure}[H]
    			\centering
    			\includegraphics[scale=0.80]{Images/rsync/rsync_backup_forwardslash.PNG}
    			\caption{La diferencia entre usar y no usar la barra en \rsync{}.}
    			\label{fig:rsync_backup_forwardslash}
		\end{figure}

		En cuanto a las opciones encontramos varias que nos parecieron bastante 'utiles. La primera que probamos fue \texttt{-v}(verbose), como indica su nombre lo que hace es hacer la salida de \rsync{} mucho m'as verbosa haciendo que muestre que es lo que esta copiando asi como cuantos bytes copia y cuanto tiempo le lleva. Otra opci'on que tambi'en nos pareci'o 'util pero algo peligrosa es \texttt{--delete}. Lo que hace es eliminar cualquier archivo en el directorio de destino que no este en el directorio a copiar. La raz'on de su peligrosidad es su principio de funcionamiento, si hay algun archivo en la carpeta de destino que desamos conservar pero este no esta en la carpeta a copiar sera borrado.

		\begin{figure}[h]
			\centering
			\begin{subfigure}{0.75\linewidth}
				\includegraphics[width=1\linewidth]{Images/rsync/rsync_backup_verbose.PNG}
				\caption{\rsync{} con la opci'on \texttt{-v}.}
			\end{subfigure}
			\bigbreak
			\begin{subfigure}{0.7\linewidth}
				\includegraphics[width=1\linewidth]{Images/rsync/rsync_backup_delete.PNG}
				\caption{\rsync{} con la opci'on \texttt{--delete}.}
			\end{subfigure}
			\caption{Probamos usar las opciones \texttt{-v} y \texttt{--delete} con \rsync{}.}
			\label{fig:rsync_backup_options_1}
		\end{figure}

		Luego de un poco mas de b'usqueda encontramos la opci'on \texttt{-a}(archive), esta es equivalente a un gran n'umero de opciones. Es la manera de decir que uno quiere preservar casi todos los atributos sobre los archivos copiados, la unica exepci'on es que no preserva los enlaces duros.\footnote{El motivo por el que no son preservados es porque encontrar archivos que poseen m'ultiples enlaces es costoso en cuanto a recursos. Para preservarlos se debe usar la opci'on \texttt{-H}.} Las opciones a las que \texttt{-a} se expande son:

		\begin{itemize}
			\customitem{-r} Hace que el directorio a copiar se copie de manera recursiva, permitiendo copiar subdirectorios y sus contenidos.
			\customitem{-l} Mantiene los enlaces s'imbolicos encontrados.
			\customitem{-p} Mantiene los permisos originales de los archivos copiados. Sin esta opci'on los archivos existentes(incluyendo los que se actualizan) mantienen sus permisos. Para los nuevos los bits de permisos son iguales a los originales tras ser enmascarados con los bits de permiso de los predeterminados del directorio de destino.
			\customitem{-t} Hace que los tiempos de modificaci'on se transfieran de los archivos originales a los copiados. Si esta opci'on no se incluye, durante el pr'oximo backup todos los archivos van a ser actualizados, es decir copiados nuevamente.
			\customitem{-g} Mantiene el grupo de los archivos copiados. Si esta opci'on no se incluye los archivos copiados toman el grupo de el usuario que haya ejecutado el comando.
			\customitem{-o} Mantiene el due'no de los archivos copiados. Si esta opci'on no se incluye el due'no de los archivos copiados pasa a ser el usuario que haya ejecutado el comando.
			\customitem{-D} Esta opci'on se expande a dos opciones m'as, son:
			\begin{itemize}
				%"\kern" adds a non-breaking space of the specified size.
				\customitem{-{\kern 0.05em}-devices} Hace que se copien los archivos de character y bloqueo de dispositivo a el destino para recrear los dispositivos. Esta opci'on no tiene efecto si \rsync no se ejecuta como \texttt{root}.
				\customitem{-{\kern 0.05em}-specials} Hace que se copien todos los archivos especiales.
			\end{itemize}
		\end{itemize}

		Habiendo analizado las opciones de \rsync decidimos que la configuraci'on ideal, al menos en nuestro caso, ser'ia \texttt{rsync -avH ~/C/ /mnt/sdb/Backup}. Teniendo nuestra configuraci'on probamos usar el comando y funciono perfectamente, haciendo un backup de todos los elementos en el directorio \texttt{C}.

		\begin{figure}[H]
			\centering
			\includegraphics[scale=0.7]{Images/rsync/rsync_backup_final.PNG}
			\caption{Usamos \rsync{} con todas las opciones que decidimos.}
			\label{fig:rsync_backup_final}
		\end{figure}

		Para verificar que el backup hubiese funcionado correctamente listamos los contenidos de el \backup con el comando \texttt{ls -lr /mnt/sdb/Backup/}. Efectivamente hab'ia funcionado de manera correcta, todos los archivos estaban y ten'ian todos los atributos correctos(due'no, permisos, 'ultima modificaci'on, etc).

		\begin{figure}[H]
			\centering
			\includegraphics[scale=0.7]{Images/rsync/rsync_backup_final_result.PNG}
			\caption{Verificamos que los resultados del backup fuesen correctos.}
			\label{fig:rsync_backup_final_result}
		\end{figure}

		Como nota final creemos que vale la pena aclarar que debido nuestra configuraci'on \rsync{} hace backups incrementales,\footnote{Referirse a secci'on 1.2 - Tipos de backups.} dado que los archivos copian su fecha de modificaci'on. Por lo que si intentamos hacer un backup de la misma carpeta sin cambiar nada nign'un archivo se copiar'a.

		\begin{figure}[H]
			\centering
			\includegraphics[scale=0.7]{Images/rsync/rsync_backup_incremental.PNG}
			\caption{Revisamos si \rsync{} hac'ia backups diferenciales con nuestra configuraci'on.}
			\label{fig:rsync_backup_incremental}
		\end{figure}

	\section{Software comercial}
	Seg'un la consigna del trabajo, ahora debemos elegir un software de backups comercial, es decir, que sea desarrollado y distrubuido por una empresa, generalmente en forma de una soluci'on paga (que deberemos pagar). Para ello, elegimos uno muy conocido, \textit{EaseUS Todo Backup}, de la empresa, como lo dice el nombre, \textit{EaseUS}. Esta empresa se dedica al desarrollo de software comercial de distinto tipo, ofreciendo soluciones no s'olo para backups, si no software tambi'en dedicado a recuperaci'on de datos, administraci'on de particiones en discos, y transferencia de datos entre computadoras, destac'andose principalmente por el primero de la lista. En cuanto al programa con el que trabajaremos, mencionar que 'este est'a disponible en dos versiones: para uso personal (``\textit{for home}'') y para uso profesional (``\textit{for business}'', tambi'en llamado ``\textit{Enterprise}'') y hasta donde podemos ver, s'olamente desarrollado para SOs Windows.
	
	\subsection{Instalaci'on del software}
	Como dijimos que hay dos versiones, elegimos una de ellas. La especialidad y la materia tienen el objetivo de instruirnos en saber asesorar a negocios y particulares, como tambi'en manejarnos por nuestra cuenta en el 'ambito correspondiente (sea hacer en este caso, backups por la seguridad de nuestros propios datos o los de nuestro propio emprendimiento, en caso de que vayamos a entablar uno), pero dado el particular enfoque del apunte de backups hacia lo profesional, sumado a que en este 'ambito sea aplicable mayor variedad de opciones (y as'i en consecuencia, probablemente el software relacionado sea m'as completo) aplicando m'as de la teor'ia, optamos por probar la versi'on \textit{Enterprise}.
	
	Para instalarlo, primero nos dirigimos a la p'agina de \textit{EaseUS}, y de all'i a la secci'on de su software de backups, versi'on profesional\footnote{\url{https://www.easeus.com/backup-software/tb-enterprise.html}}. Debemos de descargar el ejecutable correspondiente.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/website}
		\caption{P'agina principal de \textit{EaseUS Todo Backup Enterprise}}
	\end{figure}
	
	En nuestro caso, como lo usaremos nada m'as con prop'ositos demostrativos en este TP, utilizaremos la versi'on de prueba gratuita, \textit{Free Trial}. Destacar que seg'un se indica en el sitio, la versi'on de prueba tiene todas las funciones que la versi'on completa, pero nada m'as por un per'iodo de 30 d'ias, para despu'es del que luego deberemos de pagar para su uso continuado. Este tiempo ser'a m'as que suficiente para ver todas sus funciones, dentro de los medios que tenemos disponibles. 
	
	Nos pide si, nuestro correo electr'onico para continuar, pero supuestamente se puede optar por no recibir correos por parte de ellos, aunque dudamos de que aquello se cumpla. Tambi'en es posible que use nuestro correo electr'onico como un m'etodo para evitar estar continuamente volviendo a descargar el programa tras pasados los 30 d'ias.
	
	Al finalizar la descarga, tendremos un instalador de alrededor de unos 130 MB, llamado \texttt{tb\_enterprise\_trial.exe}. Al ejecutarlo y comenzar con la instalaci'on, ser'a bastante sencillo como seguir los pasos por los cuales nos gu'ia el instalador. Al comenzar elegimos el idioma del instalador, nos dice de aceptar los t'erminos y condiciones de uso, la ruta de instalaci'on, y la ruta por defecto donde los backups se guardar'ian. Como si un dato curioso, permite manejar de forma centralizada los backups de distintos discos o unidades de almacenamiento que dispongamos a lo largo de m'ultiples sistemas, por un administrador, a trav'es de otro software que parecen proveer,  lo cual puede venir 'util, aunque hay que tener en cuenta que ya en estos casos se optar'ia ya m'as por una soluci'on hecha a medida, como se menciona en la teor'ia.
	
	\begin{figure}[H]
		\centering \captionsetup{justification=centering}
		\subfloat[Terminos y Condiciones]{\includegraphics[width=.45\textwidth]{Images/easeus/install_tyc}}
		\hfill
		\subfloat[Opci'on del componente de administraci'on centralizada]{\includegraphics[width=.45\textwidth]{Images/easeus/install_cent}}
		\par \vspace{15pt}
		\subfloat[Ruta de instalaci'on]{\includegraphics[width=.45\textwidth]{Images/easeus/install_path}}
		\hfill
		\subfloat[Ruta por defecto de backups]{\includegraphics[width=.45\textwidth]{Images/easeus/install_backPath}} \vspace{10pt}
		\caption{Etapas destacadas del proceso de instalaci'on}
	\end{figure}
	
	\subsection{Uso del software}
	
	Una vez ya instalado el programa, lo abrimos por primera vez y nos encontramos con la ventana principal desde la cual podemos acceder pr'acticamente a todas las distintas opciones que se ofrecen.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/use_main}
		\caption{Pantalla principal del programa}
	\end{figure}
	
	\subsubsection{Opciones del programa}
	
	\paragraph{Tasks}
	
	Podemos observar que hay una barra lateral con distintas secciones. La principal claramente es la de \texttt{TASKS}. All'i podremos encontrar las distintas tareas de backup que hayamos realizado a lo largo del tiempo, como as'i tambi'en poder restaurar alguna copia de seguridad realizada de ser necesario.
	
	Para programar una nueva tareas, nos dirigimos al bot'on \texttt{NEW TASK}.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/use_newtask}
		\caption{Ventana para programar una nueva \textit{tarea}}
	\end{figure}
	
	Se nos abrir'a una ventana para lo que ser'ia, traducido al espa'nol, hacer lo que el programa llama una \textit{Nueva Tarea}.
	
	Nos encontramos a su vez con m'ultiples apartados. Primero podemos ver que nos permite hacer backup de m'ultiples ``tipos'' de informaci'on:
	
	\begin{itemize}
		\item \textbf{Disk/Volume} (\textit{Disco/Volumen}): Podemos hacer el backup de un volumen\footnote{Un \textit{volumen}, a breve, es un 'area de almacenamiento accesible con un sistema de archivos 'unico, accesible por el sistema operativo.} completo en nuestro sistema. Podemos realizarlo para uno, o varios en simult'aneo.
		\item \textbf{File} (\textit{Archivo}): Tambi'en podemos hacer el backup de determinados directorios o archivos en nuestro sistema, de forma espec'ifica seg'un nuestras necesidades. Esto es 'util si queremos tener resguardada aparte informaci'on cuya importancia sea mayor al del resto de los archivos del volumen, o si no nos interesa directamente resguardar el resto.
		\item \textbf{Mail}: Se explica por s'i solo. Permite hacer un backup del correo electr'onico. De todas formas, seg'un pudimos observar, parece estar limitado a aquel sincronizado con el programa de e-mail por defecto de Windows. Como en nuestro caso no lo tenemos configurado, devuelve un mensaje de error. \vspace{-7pt}
		
		\begin{center}
			\begin{minipage}{.6\linewidth}
				\centering
				\captionsetup{justification=centering}
				\includegraphics[width=.9\linewidth]{Images/easeus/use_mailerr}
				\captionof{figure}{Error al intentar acceder a la opci'on de backup de \textit{Mail}}
			\end{minipage}
		\end{center}\vspace{3pt}
		
		\item \textbf{ExchangeDB} y \textbf{ExchangeMail}: Est'an relacionados al backup de informaci'on de \textit{Exchange}, un servicio ofrecido por \textit{Microsoft} para el manejo de correo electr'onico, calendario y contactos para empresas, accesible a trav'es de m'ultiples plataformas. Como claramente no tenemos acceso a este servicio, no podremos probar esta funci'on.
		\item \textbf{SQL}: Permite el backup de las bases de datos de tipo \textit{SQL} que tengamos corriendo en un servidor dentro de nuestro sistema. Este tipo de protocolo para el almacenamiento y administraci'on de bases de datos es muy com'un en las distintas empresas, por lo que es bueno que el programa disponga de esta opci'on.
	\end{itemize}
	
	En las pesta'nas de la ventana que si podemos probar (\textit{Disk/Volume} y \textit{File}), a su vez tenemos distintas cosas que podemos configurar. 
	
	Est'an las cosas b'asicas, como el destino de la copia de seguridad, que por defecto es el establecido en la instalaci'on (sin modificar nada es \texttt{C:\textbackslash{}My Backups}), y tanto el nombre como la descripci'on del backup que estamos realizando en esta tarea, para poder identificarlo f'acilmente.
	
	Otras opciones clave, son \textit{Schedule} (Programar), que permite establecer per'iodos de tiempo mediante los cuales se van a hacer backups de forma autom'atica, y \textit{Backup Cleanup} (Limpieza de backups) que indicar'ia el tiempo que tiene que pasar para que la informaci'on deje de tener validez, as'i el programa autom'aticamente borrar'ia backups pasados esa fecha para liberar espacio.
	
	%Me faltó mostrar como era dentro de backup cleanup. Si les parece que hay que ponerlo, agréguenlo, o si lo hago yo. -Ariel
	
	\begin{figure}
		\centering
		\subfloat[Schedule]{\includegraphics[width=.475\textwidth]{Images/easeus/use_schedule}}
		\hfill
		\subfloat[Backup Cleanup]{\includegraphics[width=.475\textwidth]{Images/easeus/use_cleanup}}
		\vspace{7pt}
		\caption{Opciones \textit{Schedule} y \textit{Backup Cleanup}}
	\end{figure}
	
	Tambi'en existen cosas m'as avanzadas y en detalle que se pueden configurar si entramos en \textit{Backup options}. Iremos pesta'na por pestan'a con una descripci'on breve de las posibilidades en cada una:
	
	\begin{itemize}
		\item \textit{Performance} (Rendimiento): Podemos definir la prioridad del backup, as'i el programa puede determinar cu'al hacer primero en caso de haber conflictos con varias tareas corriendo en simult'aneo (por ejemplo, puede suceder con backups programados), al igual que la divisi'on del backup en partes si se lo necesita, y el nivel de compresi'on de la informaci'on, para reducir espacio ocupado.
		\item \textit{Encryption} (Encriptaci'on): Permite establecer una contrase'na para el cifrado de los datos. Seg'un investigamos, el programa usa el algoritmo AES256.
		\item \textit{E-mail Notification} (Notificaci'on por e-mail): Se puede establecer para que el software notifique mediante correo electr'onico a direcciones designadas, cada vez que se hace un backup, tanto de forma correcta o no. Nuevamente, puede ser 'util principalmente con backups programados.
		\item \textit{Custom Commands} (Comandos personalizados): Si se desea, se pueden ejecutar comandos de consola tanto antes como despu'es de un backup. Puede ser 'util si se quieren realizar otras tareas antes o despu'es de dichos, que requieran programas o aplicaciones externas.
		\item \textit{Offsite Copy} (Copia fuera del lugar): Esto es clave si queremos cumplir con la estrategia 3-2-1 mencionada en la teor'ia, en la que se aconseja de tener una copia de los datos fuera del lugar donde originalmente est'an almacenados. Con esta opci'on, podemos ingresar las credenciales de un servidor FTP en el cual hacer una copia del backup realizado.
		\item \textit{Backup Mode} (Modo del backup): Permite configurar algunas opciones varias referidas al backup. Seg'un si estamos haciendo un backup en modo \textit{Disk/Volume} podemos hacerlo sector por sector, o si hacemos en el modo \textit{File} de mantener las opciones de seguridad que pueda tener cada archivo, entre otros detalles.
		\item \textit{File Filter} (Filtro de archivos): Permite agregar excepciones a los archivos de los cuales hacer backup, como archivos de determinado formato o en cierta ruta de entre todas las incluidas.
		\item \textit{Image Check} (Chequeo de imagen): Otro de los puntos claves mencionados en la teoría es la revisión del funcionamiento correcto de las herramientas y de la integridad de los backups realizados para que no existan inconvenientes a la hora de restaurar alguno. Si bien ser'ia ideal que el programa permita con regularidad esta opci'on, en esta secci'on si permite habilitar de chequear la integridad del backup realizado apenas finaliz'o.
	\end{itemize}
	
	\begin{figure}[H]
		\centering
		\subfloat[Ventana de \textit{Backup Options} (Pesta'na \textit{Performance})]{\includegraphics[width=.8\textwidth]{Images/easeus/use_perf}} \par \vspace{18pt}
		\subfloat[\textit{Encryption}]{\includegraphics[width=.3\textwidth]{Images/easeus/use_encryption}} \hfill
		\subfloat[\textit{E-mail Notification}]{\includegraphics[width=.3\textwidth]{Images/easeus/use_mailnotif}} \hfill
		\subfloat[\textit{Offsite Copy}]{\includegraphics[width=.3\textwidth]{Images/easeus/use_offsitecopy}} \vspace{10pt}
		\caption{Algunas de las pesta'nas del apartado \textit{Backup Options}}
	\end{figure}
	
	Cubiertas todas las opciones de la ventana \texttt{NEW TASK}, cubriremos algunas m'as en la barra superior de la pantalla principal presentada al comienzo del apartado. 
	
	Tenemos por supuesto que tener una forma de recuperar los archivos. Entonces uno de los botones es \textit{Recovery}, en el cual podemos elegir desde un archivo de backup, la ubicaci'on a la cual restaurar su contenido. Si se hace uso del bot'on mientras se selecciona una tarea, tendremos las opciones mencionadas, ya asumiendo que estamos intentado restaurar el backup correspondiente a dicha, pudiendo seleccionar entre los distintos backups relacionados disponibles hechos a lo largo del tiempo (se visualizar'a mejor al poner a prueba el programa con el backup de un pendrive en la pr'oxima secci'on). Similarmente, la opci'on \textit{System Transfer} permite lo mismo pero con backups hechos sobre sistemas completos.
	
	Otra de las opciones que aparecen si seleccionamos una tarea en espec'ifico, es la de hacer un backup de la tarea, y del bot'on sale un men'u desplegable en el cual nos permite elegir entre un backup completo, diferencial e incremental, los cuales ya definimos al comienzo del TP (tambi'en a demostrar mejor en la pr'oxima secci'on). Fuera de esto, el resto de las botones nuevos que aparecen permiten visualizar detalles de la tarea, editar sus opciones y exportarla a un archivo, para si luego se desea pasarse a otra computadora con el mismo programa.
	
	%No hay tantas fotos acá al final porque va más para la parte de lo del pendrive
	
	\paragraph{Logs}
	
	Nos muestra una lista de todas las distintas acciones realizadas con el programa, como crear tareas, ejecutar backups, etc, a lo largo del tiempo, y si se sucedieron correctamente o no. Si se desea, con el bot'on en la esquina superior \textit{Export Logs} se pueden exportar los registros a un archivo \texttt{.csv}.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/use_logs}
		\caption{Apartado \textit{Logs}, luego de realizar m'ultiples operaciones de prueba}
	\end{figure} 
	
	\paragraph{License}
	
	Aqu'i se muestran las m'ultiples licencias de uso del software, en caso que se dispongan m'ultiples si se utilizan en m'ultiples computadoras, por ejemplo.
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/use_license}
		\caption{Apartado \textit{License}}
	\end{figure} 
	
	\paragraph{Tools}
	
	No es un apartado de por s'i, si no que contiene una lista de m'ultiples herramientas individuales adicionales que incluye el programa. Repasaremos brevemente por ellas:
	
	\begin{itemize}
		\item \textit{SQL Credential Manager} (Administrador de credenciales de SQL): Permite administrar las claves de autenticaci'on en las bases de datos SQL en el sistema, de existir.
		\item \textit{Disk/Partition Clone} (Clonar discos/particiones): Como lo dice su nombre, permite hacer copias completas de volumenes en otros accesibles en el sistema.
		\item \textit{Import Task} y \textit{Export Task}: (Importar Tarea y Exportar Tarea): Antes dijimos que pod'iamos exportar una tarea, por lo que a partir de estas utilidades podr'iamos volver a importarlas y tambi'en tener otra forma de exportarlas.
		\item \textit{Check Image} (Verificar Imagen): Otra forma de verificar la imagen de un backup realizado.
		\item \textit{Emergency Disk} (Disco de emergencia): Permite crear un CD/DVD o pendrive USB booteable con Windows o Linux, en caso de que se requieran recuperar backups almacenados localmente y el SO no sea capaz de bootear.
		\item \textit{P2V Recovery} y \textit{P2V Copy} (Recuperaci'on de P2V y Copia P2V): P2V, de sus siglas en ingl'es, \textit{Physical-to-Virtual} es un proceso mediante el cual se migra el sistema operativo y los datos a un entorno virtual. Esto permite correr m'ultiples aplicaciones en simult'aneo dentro de una misma computadora, de forma a'islada. Por lo tanto, esta herramienta nso permitir'ia transferir los datos a un entorno virtual como tambi'en recuperarlos del mismo.
		\item \textit{Tape Manager} (Administrador de cassettes): Permite copiar datos a cassettes, siendo 'util para almacenamiento de informaci'on a largo plazo, dada su comprobada confiabilidad dado que son uno de los que menos se degradan a lo largo del tiempo.
		\item \textit{Mount/Unmount} (Montar/Desmontar): Permite, como lo dice el nombre, montar y desmontar backups realizados (formato \texttt{.pbd} como discos, para poder verificar su validez y sus contenidos.
		\item \textit{iSCSI Initiatior} (Iniciador iSCSI): El protocolo \texttt{iSCSI} permite a una computadora conectarse a un dispositivo \texttt{SCSI}\footnote{\texttt{SCSI}, de sus siglas en ingl'es, \textit{Small Computer System Interface}, es una interfaz est'andar para la transferencia de datos entre distintos dispositivos del bus de una computadora.} en la misma red.
		\item \textit{Enable PreOS} (Activar PreSO): Habilita un men'u de booteo cuando la compu inicia, antes que Windows, para tener una posibilidad de recuperar los datos en caso de que este 'ultimo falle.
		\item \textit{Enable PXE} (Activar PXE): PXE, de sus siglas en ingl'es, \textit{Preboot Execution Environment}, es un entorno que permite arrancar e instalar el sistema operativo de una computadora a distancia. En este caso, permite arrancar el entorno \textit{PreSO} hablado a trav'es de la red.
		\item \textit{Refresh Disks} (Actualizar discos): Simplemente permite actualizar para el programa la lista de discos, particiones, volumenes accesibles por la computadora. 'Util si recientemente hemos conectado alguno nuevo y no est'a siendo reconocido por el software de backup, sin necesidad de reiniciarlo.
	\end{itemize}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.34\textwidth]{Images/easeus/use_tools}
		\caption{Lista de herramientas (\textit{Tools}) completa en el men'u izquierdo}
	\end{figure}
	
	\subsubsection{Haciendo backup de un pendrive}

	
	\subsubsection{Haciendo backup de un pendrive}
	\paragraph{Diferencias entre los backups}
    Para probar y poner en pr'actica algunas de las funciones provistas por el programa, decidimos hacer un backup de un pendrive. Antes de comenzar, metimos en 'el archivos variados para tener algo con lo que trabajar.


	Lo primero que tratamos de hacer fue un backup del pendrive tomando a este como un volumen, para lo que debimos crear una nueva tarea y, en ella, seleccionar el volumen deseado, lugar de destino y nombre de la copia. Lamentablemente este intento no funcion'o. Probamos borrar la task y reiniciar el programa, crear tareas nuevas similares, pero tampoco lograron su objetivo. Hacer una copia del pendrive como volumen no dio frutos.

    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/1-bp_volumen.png}
		\caption{Creaci'on de un backup del pendrive como volumen}
		\label{bp_volumen}
	\end{figure}
	
	Es por eso que se nos ocurri'o hacer un backup de la unidad entera como ``File". Para eso, sin borrar ninguna anterior, creamos una nueva task y nos dirigimos a la segunda pesta'na, que dice “File”. En ella, seleccionamos el pendrive mencionado y, debajo, en la descripci'on, al igual que en la tarea anterior, indicamos el destino y el nombre del nuevo backup. Esta prueba se realiz'o con 'exito. Para verificar que todo hab'ia salido bien, nos dirigimos a la carpeta que indicamos como destino y encontramos un archivo ``\texttt{File Backup\_20201024\_Full\_v1}’’, que ten'ia guardados los mismos archivos que el pendrive. %Algo que le otorga comodidad al uso de este software es que los resultados del programa pueden abrirse con el explorador de archivos de Windows.

    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/2-t2_file.png}
		\caption{Creaci'on de un backup del pendrive como archivo}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\subfloat[Archivo de backup]{\includegraphics[width=.475\textwidth]{Images/easeus/pendrive/3-t2_dir_1.png}}
		\hfill
		\subfloat[Contenido del backup]{\includegraphics[width=.475\textwidth]{Images/easeus/pendrive/4-t2_fullv1_c1.png}}
		\vspace{7pt}
	\end{figure}
	
    Para probar que los backups se realizaran correctamente, borramos algunos archivos ejecutables que se encontraban en el pendrive. Luego realizamos, sobre este, un backup incremental y lo comparamos con el completo realizado anteriormente: el m'as peque'no era el incremental. Adem'as verificamos su contenido: este 'ultimo no ten'ia los archivos que hab'ian sido borrados, mientras que el completo, s'i.
    
    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/5-borrar_exe.png}
		\caption{Borramos algunos archivos del pendrive}
	\end{figure}
    
    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/6-t2_dir_2.png}
		\caption{Contenido de la carpeta ``File Backup'', con los archivos de copia generados}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\subfloat[Contenido del incremental]{\includegraphics[width=.475\textwidth]{Images/easeus/pendrive/7-t2_incv1_c1.png}}
		\hfill
		\subfloat[Contenido del completo]{\includegraphics[width=.475\textwidth]{Images/easeus/pendrive/8-t2_fullv1_c2.png}}
		\vspace{7pt}
	\end{figure}
	
    Lo siguiente que hicimos fue realizar un backup diferencial. Pero antes, para poder observar su funcionamiento, creamos en el pendrive un archivo ``\texttt{prueba.txt}’’. Luego procedimos a hacer el backup diferencial y comparamos el tama'no con el de los otros, as'i como su contenido: ten'ia los mismos datos que el incremental y, adem'as, el archivo nuevo que hab'iamos creado (como ya explicamos al principio de este trabajo, el diferencial copia todos los cambios desde el 'ultimo completo hecho). 

    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/9-pruebatxt.png}
		\caption{Creaci'on de \texttt{prueba.txt}}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/10-t2_difv1_c1.png}
		\caption{Contenido del backup diferencial\footnotemark\/}
	\end{figure}
    
    \footnotetext{{Al crear el archivo de prueba, olvidamos que no ten'iamos las extensiones habilitadas (es decir, se mostraba el nombre del archivo, pero no su extensi'on)
    y, por ese motivo, el archivo se termin'o llamando ``prueba.txt.txt’’.}}
        
    Lo pr'oximo fue realizar otro backup incremental. No cambiamos los contenidos del pendrive para hacerlo. Una vez hecha esta copia, volvimos a observar sus caracter'isticas y a compararlas con las de las anteriores: el incremental era m'as chico que el diferencial.

    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/11-t2_dir_3.png}
		\caption{Contenido de la carpeta ``File Backup'', con los archivos de copia generados}
		\label{imagenes_t2}
	\end{figure}
	
	A modo de resumen y para observar mejor las diferencias entre los tipos de backups, prestemos atenci'on a la siguiente imagen: el primer backup que hicimos fue completo, con un tamaño de 2.510,352 KB. Esta primera copia conten'ia \texttt{todos} los archivos del pendrive. Luego de realizar algunos cambios en los archivos originales, hicimos un backup incremental, que pes'o 884 KB y conten'ia \texttt{s'olo los ficheros modificados}.
    La siguiente copia de seguridad que hicimos fue diferencial, conten'ia los archivos modificados (lo mismo que el incremental anterior) y, adem'as, el archivo prueba.txt que hab'iamos creado.
    Por 'ultimo, hicimos otro incremental, que no conten'ia nada: no se hab'ian efectuado cambios entre esta copia y la anterior.
    
    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/12-bp_tipos.png}
	\end{figure}
	
    \paragraph{Recuperaci\'on de datos}
    Otra funci'on que decidimos probar fue la de restaurar datos: obtener los archivos que est'an guardados en una copia de seguridad y reintegrarlos en nuestro sistema en el estado en que estaban al momento de hacer el backup. Para eso, hicimos click derecho sobre la tarea deseada, y, en el men'u de opciones desplegado, elegimos ``\texttt{Recuperaci'on}’’. Esa opci'on abri'o una nueva ventana como la de la imagen. Le pedimos que dejara los datos recuperados en una carpeta del escritorio. Luego, corroboramos que los archivos se hubieran restaurado correctamente.

    \begin{figure}[H]
		\centering
		\includegraphics[width=.8\textwidth]{Images/easeus/pendrive/13-rec_1.png}
		\caption{Opci'on para la recuperaci'on de datos}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\includegraphics[scale=.56]{Images/easeus/pendrive/14-rec_2.png}
		\caption{Elecci'on de la ubicaci'on de los datos recuperados}
	\end{figure}
	
	\begin{figure}[H]
		\centering
		\subfloat[Contenido de la carpeta con los archivos recuperados]{\includegraphics[width=.475\textwidth]{Images/easeus/pendrive/15-rec_3.png}}
		\hfill
		\subfloat[Corroboramos que los archivos no se encontraran da'nados]{\includegraphics[width=.475\textwidth]{Images/easeus/pendrive/16-rec_4.png}}
		\vspace{7pt}
	\end{figure}
	
	\paragraph{Detalles de la tarea}
	
	Para ver los detalle de una tarea deseada, hicimos click derecho sobre ella y seleccionamos la opci'on ``\texttt{Detalles}'' del men'u desplegado. 
    
    Los detalles de la tarea se organizan en tres pesta'nas:
	
	\begin{itemize}
		\item {La primera, \texttt{informaci'on b'asica}, contiene datos como el nombre de la misma, tipo de backup (si es por volumen, por archivo, etc), d'onde se guardan las im'agenes y si existen programas para crear o eliminar copias.}
		
		\item{La segunda pesta'na brinda informaci'on sobre las \texttt{im'agenes de copia de seguridad}: fecha de creaci'on, tipo (diferencial, incremental o completa), ubicaci'on y nombre. Se pueden hacer diferentes im'agenes en una misma tarea, como hicimos en este trabajo. De esta manera, las distintas copias se van comparando y complementando entre s'i: la diferencial respecto a una completa y la incremental respecto a cualquier otra realizada, pero siempre de la misma tarea.}
		\item{La 'ultima pesta'na, \texttt{detalles del backup}, nos informa sobre procesos que est'an corriendo en este momento relacionados con esta tarea.}
	\end{itemize}
	
    \begin{figure}[]
		\centering
		\includegraphics[scale=.56]{Images/easeus/pendrive/17-t2_d1.png}
		\caption{Informaci'on b'asica}
	\end{figure}
	
    \begin{figure}[H]
		\centering
		\includegraphics[scale=.56]{Images/easeus/pendrive/18-t2_d2.png}
		\caption{Im'agenes de copia de seguridad}
	\end{figure}

    \begin{figure}[H]
		\centering
		\includegraphics[scale=.56]{Images/easeus/pendrive/19-t2_d3.png}
		\caption{Detalles de la copia de seguridad}
	\end{figure}
	
	
	\paragraph{Comprobar imagen}
	
    Por 'utimo, probamos la funci'on de comprobar la imagen. Esta utilidad nos comunica la validez de una copia de seguridad. Esta informaci'on es importante porque, si una copia se encuentra da'nada, es muy probable que los datos no se puedan recuperar. Para averiguar eso, nos dirigimos a la lista de tareas, hicimos click derecho y luego seleccionamos ``\texttt{Comprobar imagen}’’ sobre la deseada. Los resultados pueden observarse en la figura \ref{resultados}.

    \begin{figure}[H]
		\centering
		\includegraphics[scale=0.6, width=.8\textwidth]{Images/easeus/pendrive/20-t2_ch1.png}
		\caption{Elegimos la opci'on \texttt{comprobar imagen}}
	\end{figure}
    
    \begin{figure}[H]
		\centering
		\includegraphics[scale=0.6, width=.8\textwidth]{Images/easeus/pendrive/21-t2_ch2.png}
		\caption{Imagen comprobada}
        \label{resultados}
    \end{figure}

	%Looks nicer
	\newpage
	\section{Comandos usados}
		A continuaci'on se encuentran todos los comandos utilizados en este trabajo, correspondientes a las im'agenes presentadas.

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{fuchsia}{sudo} \codetext{light-blue}{apt} \codetext{light-orange}{install} \codetext{light-red}{rsync}
			\end{code-box}
			\imagecaption{rsync_install}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{fuchsia}{sudo} \codetext{light-blue}{fdisk} \codetext{light-orange}{-l}
			\end{code-box}
			\imagecaption{rsync_disk_info}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{fuchsia}{sudo} \codetext{light-blue}{mkfs.ext4} \codetext{light-red}{/dev/sdb}
			\end{code-box}
			\imagecaption{rsync_disk_format}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{fuchsia}{sudo} \codetext{light-blue}{mkdir} \codetext{light-red}{/mnt/sdb}
			\end{code-box}
			\imagecaption{rsync_disk_mount}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{mount} \textbar{} \codetext{light-blue}{grep} \codetext{light-red}{``sdb''}
			\end{code-box}
			\imagecaption{rsync_disk_check}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{touch} \codetext{light-red}{Prueba}

				\codetext{light-blue}{ls} \codetext{light-orange}{-l}
			\end{code-box}
			\imagecaption{rsync_disk_touch}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{fuchsia}{sudo} \codetext{light-blue}{chown} \codetext{light-red}{martin:martin sdb}

				\codetext{light-blue}{ls} \codetext{light-orange}{-l}

				\codetext{light-blue}{touch} \codetext{light-red}{Prueba}

				\codetext{light-blue}{ls} \codetext{light-red}{sdb}
			\end{code-box}
			\imagecaption{rsync_disk_works}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{ls} \codetext{light-orange}{-R} \codetext{light-red}{C}
			\end{code-box}
			\imagecaption{rsync_C_contents}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{rsync} \codetext{light-red}{\textasciitilde/C /mnt/sdb/Backup}

				\codetext{light-blue}{ls} \codetext{light-red}{/mnt/sdb/Backup}

				\codetext{light-blue}{rsync} \codetext{light-orange}{-r} \codetext{light-red}{\textasciitilde/C /mnt/sdb/Backup}

				\codetext{light-blue}{ls} \codetext{light-red}{/mnt/sdb/Backup}
			\end{code-box}
			\imagecaption{rsync_backup_first_try}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-red}{ls} \codetext{light-orange}{-Rl} \codetext{light-red}{/mnt/sdb/Backup}
			\end{code-box}
			\imagecaption{rsync_backup_contents}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{rsync} \codetext{light-orange}{-r} \codetext{light-red}{\textasciitilde/C /mnt/sdb/Backup/}

				\codetext{light-blue}{ls} \codetext{light-orange}{-R} \codetext{light-red}{/mnt/sdb/Backup} \textbar{} \codetext{light-blue}{head} \codetext{light-orange}{-3}

				\codetext{light-blue}{rm} \codetext{light-orange}{-R} \codetext{light-red}{/mnt/sdb/Backup/*}

				\codetext{light-blue}{rsync} \codetext{light-orange}{-r} \codetext{light-red}{\textasciitilde/C/ /mnt/sdb/Backup/}

				\codetext{light-blue}{ls} \codetext{light-orange}{-R} \codetext{light-red}{/mnt/sdb/Backup} \textbar{} \codetext{light-blue}{head} \codetext{light-orange}{-4}
			\end{code-box}
			\imagecaption{rsync_backup_forwardslash}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{rsync} \codetext{light-orange}{-rv} \codetext{light-red}{\textasciitilde/C/ /mnt/sdb/Backup/}

				\codetext{light-blue}{echo} \codetext{light-red}{``Hola''} \textgreater{} \codetext{light-red}{/mnt/sdb/Backup/Prueba.txt}
				
				\codetext{light-blue}{ls} \codetext{light-red}{/mnt/sdn/Backup}

				\codetext{light-blue}{rsync} \codetext{light-orange}{-r --delete} \codetext{light-red}{\textasciitilde/C/ /mnt/sdb/Backup/}

				\codetext{light-blue}{ls} \codetext{light-red}{/mnt/sdn/Backup}
			\end{code-box}
			\imagecaption{rsync_backup_options_1}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{rsync} \codetext{light-orange}{-avr} \codetext{light-red}{\textasciitilde/C /mnt/sdb/Backup}
			\end{code-box}
			\imagecaption{rsync_backup_final}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{ls} \codetext{light-orange}{-lR} \codetext{light-red}{/mnt/sdb/Backup}
			\end{code-box}
			\imagecaption{rsync_backup_final_result}
		\end{figure}

		\begin{figure}[H]
			\centering
			\begin{code-box}
				\codetext{light-blue}{rsync} \codetext{light-orange}{-avr} \codetext{light-red}{\textasciitilde/C /mnt/sdb/Backup}
			\end{code-box}
			\imagecaption{rsync_backup_incremental}
		\end{figure}

\end{document}


